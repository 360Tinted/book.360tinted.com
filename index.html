<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Online Appointment Booking - 360 Tinted</title>
Â  Â  <link rel="icon" href="icon.ico" type="image/x-icon">
Â  Â  <style>
Â  Â  Â  Â  /* Estilos globais do seu site principal */
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  line-height: 1.6;
Â  Â  Â  Â  Â  Â  color: #333; /* Cor do texto do seu site principal */
Â  Â  Â  Â  Â  Â  background-color: #f0f0f0; /* Cor de fundo mais clara, como no seu site principal */
Â  Â  Â  Â  }
Â  Â  Â  Â  h1, h2, h3 {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  color: #333; /* Garantir que os tÃ­tulos sigam a cor do seu site principal */
Â  Â  Â  Â  }
Â  Â  Â  Â  a {
Â  Â  Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  Â  Â  color: inherit;
Â  Â  Â  Â  }
Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  width: 90%;
Â  Â  Â  Â  Â  Â  max-width: 1200px;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  padding: 20px 0; /* Ajuste para ter um padding consistente */
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  padding: 10px 20px;
Â  Â  Â  Â  Â  Â  background-color: #007BFF; /* Cor dos botÃµes do seu site principal */
Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  transition: background-color 0.3s;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn:hover {
Â  Â  Â  Â  Â  Â  background-color: #0056b3; /* Hover dos botÃµes do seu site principal */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Estilos especÃ­ficos para a pÃ¡gina de agendamento */
Â  Â  Â  Â  .header {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 2rem;
Â  Â  Â  Â  Â  Â  padding-top: 40px; /* EspaÃ§amento para o topo */
Â  Â  Â  Â  }

Â  Â  Â  Â  .header h1 {
Â  Â  Â  Â  Â  Â  font-size: 2.5rem;
Â  Â  Â  Â  Â  Â  color: #333; /* Cor do texto do seu site principal */
Â  Â  Â  Â  Â  Â  margin-bottom: 0.5rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .header p {
Â  Â  Â  Â  Â  Â  font-size: 1.125rem;
Â  Â  Â  Â  Â  Â  color: #555; /* Cor do texto do seu site principal */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Logo no header */
Â  Â  Â  Â  .logo {
Â  Â  Â  Â  Â  Â  max-height: 80px; /* Ajustado para ser visÃ­vel e nÃ£o muito grande */
Â  Â  Â  Â  Â  Â  margin-bottom: 1rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* BotÃ£o de "Voltar ao site principal" */
Â  Â  Â  Â  .nav-link {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  background-color: #007BFF; /* Cor dos botÃµes do seu site principal */
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  padding: 0.5rem 1rem;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  Â  Â  font-weight: 500;
Â  Â  Â  Â  Â  Â  margin-bottom: 1rem;
Â  Â  Â  Â  Â  Â  transition: all 0.2s;
Â  Â  Â  Â  }

Â  Â  Â  Â  .nav-link:hover {
Â  Â  Â  Â  Â  Â  background-color: #0056b3; /* Hover dos botÃµes do seu site principal */
Â  Â  Â  Â  Â  Â  transform: translateY(-1px);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Grid layout for cards */
Â  Â  Â  Â  .grid {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: 1fr 1fr;
Â  Â  Â  Â  Â  Â  gap: 2rem;
Â  Â  Â  Â  Â  Â  margin-bottom: 2rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Card styles */
Â  Â  Â  Â  .card {
Â  Â  Â  Â  Â  Â  background: #ffffff; /* Fundo branco para os cards, como no seu site principal */
Â  Â  Â  Â  Â  Â  border-radius: 0.75rem;
Â  Â  Â  Â  Â  Â  padding: 1.5rem;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Sombra mais suave */
Â  Â  Â  Â  Â  Â  transition: all 0.2s ease-in-out;
Â  Â  Â  Â  Â  Â  border: 1px solid #ddd; /* Borda mais suave */
Â  Â  Â  Â  }

Â  Â  Â  Â  .card:hover {
Â  Â  Â  Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  Â  Â  Â  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); /* Sombra no hover */
Â  Â  Â  Â  }

Â  Â  Â  Â  .card-header {
Â  Â  Â  Â  Â  Â  margin-bottom: 1.5rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card-title {
Â  Â  Â  Â  Â  Â  font-size: 1.25rem;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  color: #333; /* Cor do texto */
Â  Â  Â  Â  Â  Â  margin-bottom: 0.5rem;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 0.5rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card-description {
Â  Â  Â  Â  Â  Â  color: #555; /* Cor do texto */
Â  Â  Â  Â  Â  Â  font-size: 0.875rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Form elements */
Â  Â  Â  Â  .form-group {
Â  Â  Â  Â  Â  Â  margin-bottom: 1rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .label {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  font-size: 0.875rem;
Â  Â  Â  Â  Â  Â  font-weight: 500;
Â  Â  Â  Â  Â  Â  color: #333; /* Cor do texto */
Â  Â  Â  Â  Â  Â  margin-bottom: 0.5rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .input, .select {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 0.75rem;
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc; /* Borda mais clara */
Â  Â  Â  Â  Â  Â  border-radius: 0.375rem;
Â  Â  Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  Â  Â  Â  transition: all 0.2s;
Â  Â  Â  Â  Â  Â  background: #fff; /* Fundo branco para inputs */
Â  Â  Â  Â  Â  Â  color: #333; /* Cor do texto */
Â  Â  Â  Â  }

Â  Â  Â  Â  .input:focus, .select:focus {
Â  Â  Â  Â  Â  Â  outline: none;
Â  Â  Â  Â  Â  Â  border-color: #007BFF; /* Cor de foco dos botÃµes */
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25); /* Sombra de foco */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Button styles (usando .btn para consistÃªncia) */
Â  Â  Â  Â  .button {
Â  Â  Â  Â  Â  Â  /* Inherits from .btn */
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  display: block; /* Para ocupar a largura total */
Â  Â  Â  Â  }

Â  Â  Â  Â  .button:disabled {
Â  Â  Â  Â  Â  Â  background-color: #cccccc; /* Cor para botÃ£o desabilitado */
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  Â  Â  transform: none;
Â  Â  Â  Â  Â  Â  box-shadow: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Time slot styles */
Â  Â  Â  Â  .time-grid {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
Â  Â  Â  Â  Â  Â  gap: 0.5rem;
Â  Â  Â  Â  Â  Â  margin-top: 0.5rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .time-slot {
Â  Â  Â  Â  Â  Â  padding: 0.5rem;
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  border-radius: 0.375rem;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: all 0.2s;
Â  Â  Â  Â  Â  Â  font-size: 0.875rem;
Â  Â  Â  Â  Â  Â  background: #f9f9f9; /* Fundo mais claro */
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }

Â  Â  Â  Â  .time-slot:hover {
Â  Â  Â  Â  Â  Â  background-color: #e0e0e0; /* Hover mais suave */
Â  Â  Â  Â  Â  Â  border-color: #007BFF;
Â  Â  Â  Â  }

Â  Â  Â  Â  .time-slot.selected {
Â  Â  Â  Â  Â  Â  background-color: #007BFF; /* Cor de seleÃ§Ã£o dos botÃµes */
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border-color: #007BFF;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Summary card styles */
Â  Â  Â  Â  .summary-card {
Â  Â  Â  Â  Â  Â  grid-column: 1 / -1;
Â  Â  Â  Â  Â  Â  background: #ffffff; /* Fundo branco */
Â  Â  Â  Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  }

Â  Â  Â  Â  .summary-grid {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
Â  Â  Â  Â  Â  Â  gap: 1rem;
Â  Â  Â  Â  Â  Â  margin-bottom: 1.5rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .summary-item {
Â  Â  Â  Â  Â  Â  background: #f0f0f0; /* Fundo mais claro */
Â  Â  Â  Â  Â  Â  padding: 1rem;
Â  Â  Â  Â  Â  Â  border-radius: 0.5rem;
Â  Â  Â  Â  Â  Â  border-left: 4px solid #007BFF; /* Cor de destaque dos botÃµes */
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }

Â  Â  Â  Â  .summary-item h4 {
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  margin-bottom: 0.25rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .summary-item p {
Â  Â  Â  Â  Â  Â  color: #555;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Success screen styles */
Â  Â  Â  Â  .success-screen {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  background: #ffffff;
Â  Â  Â  Â  Â  Â  border-radius: 0.75rem;
Â  Â  Â  Â  Â  Â  padding: 2rem;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  max-width: 500px;
Â  Â  Â  Â  Â  Â  margin: 2rem auto;
Â  Â  Â  Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }

Â  Â  Â  Â  .success-icon {
Â  Â  Â  Â  Â  Â  width: 4rem;
Â  Â  Â  Â  Â  Â  height: 4rem;
Â  Â  Â  Â  Â  Â  background: #28a745; /* Verde para sucesso */
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  margin: 0 auto 1rem;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  font-size: 2rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Error message styles */
Â  Â  Â  Â  .error-message {
Â  Â  Â  Â  Â  Â  background: #f8d7da; /* Fundo vermelho claro */
Â  Â  Â  Â  Â  Â  border: 1px solid #f5c6cb;
Â  Â  Â  Â  Â  Â  color: #721c24; /* Texto vermelho escuro */
Â  Â  Â  Â  Â  Â  padding: 1rem;
Â  Â  Â  Â  Â  Â  border-radius: 0.375rem;
Â  Â  Â  Â  Â  Â  margin-bottom: 1rem;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Loading spinner styles */
Â  Â  Â  Â  .loading {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  width: 20px;
Â  Â  Â  Â  Â  Â  height: 20px;
Â  Â  Â  Â  Â  Â  border: 3px solid #f3f3f3;
Â  Â  Â  Â  Â  Â  border-top: 3px solid #007BFF; /* Cor de carregamento dos botÃµes */
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  animation: spin 1s linear infinite;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes spin {
Â  Â  Â  Â  Â  Â  0% { transform: rotate(0deg); }
Â  Â  Â  Â  Â  Â  100% { transform: rotate(360deg); }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Utility classes */
Â  Â  Â  Â  .hidden {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Responsive adjustments */
Â  Â  Â  Â  @media (max-width: 768px) {
Â  Â  Â  Â  Â  Â  .grid {
Â  Â  Â  Â  Â  Â  Â  Â  grid-template-columns: 1fr;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  .header h1 {
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 2rem;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  .time-grid {
Â  Â  Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(3, 1fr);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  Â  Â  width: 95%; /* Ajuste para mobile */
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Icon styles (for emojis ou simple icons) */
Â  Â  Â  Â  .icon {
Â  Â  Â  Â  Â  Â  width: 1.25rem;
Â  Â  Â  Â  Â  Â  height: 1.25rem;
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Fade-in animation */
Â  Â  Â  Â  .fade-in {
Â  Â  Â  Â  Â  Â  animation: fadeIn 0.5s ease-in-out;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes fadeIn {
Â  Â  Â  Â  Â  Â  from {
Â  Â  Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  Â  Â  transform: translateY(20px);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  to {
Â  Â  Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  Â  Â  Â  Â  transform: translateY(0);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="container">
Â  Â  Â  Â  <div class="header">
Â  Â  Â  Â  Â  Â  <img src="img/logo.png" alt="360 Tinted Logo" class="logo">
Â  Â  Â  Â  Â  Â  <a href="https://www.360tinted.com/" class="nav-link">â† Back to Main Website</a>
Â  Â  Â  Â  Â  Â  <h1>Online Appointment Booking</h1>
Â  Â  Â  Â  Â  Â  <p>Schedule your appointment quickly and easily</p>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="main-screen">
Â  Â  Â  Â  Â  Â  <div id="error-container"></div>

Â  Â  Â  Â  Â  Â  <div class="grid">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card" id="service-time-card">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="card-title">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="icon">ğŸ“…</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Select Service and Time
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="card-description">Choose the type of service and desired time</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="label" for="service">Service Type</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="service" class="select">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Loading services...</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="label" for="date">Date</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="date" id="date" class="input">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group" id="time-section" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="label">Available Time Slots</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="loading-times" class="hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="loading"></div> Loading times...
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="time-grid" id="time-grid">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="card-title">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="icon">ğŸ‘¤</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Your Information
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="card-description">Please fill in your details to confirm the appointment</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="label" for="name">Full Name *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="name" class="input" placeholder="Your full name">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="label" for="email">E-mail *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="email" class="input" placeholder="your@email.com">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="label" for="phone">Phone</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="tel" id="phone" class="input" placeholder="(XXX) XXX-XXXX">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="card summary-card hidden" id="summary-card">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="card-title">Appointment Summary</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="summary-grid" id="summary-content">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="button btn" id="confirm-btn" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="confirm-text">Confirm Appointment</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="loading hidden" id="confirm-loading"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="success-screen" class="success-screen hidden">
Â  Â  Â  Â  Â  Â  <div class="success-icon">âœ“</div>
Â  Â  Â  Â  Â  Â  <h2 style="font-size: 1.5rem; margin-bottom: 1rem; color: #333;">Appointment Confirmed!</h2>
Â  Â  Â  Â  Â  Â  <p style="color: #555; margin-bottom: 1.5rem;">
Â  Â  Â  Â  Â  Â  Â  Â  Your appointment has been successfully scheduled. You will receive a confirmation email shortly.
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  <div id="appointment-details" style="background: #f0f0f0; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1.5rem; text-align: left; color: #333;">
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <button class="button btn" onclick="resetForm()">Schedule New Appointment</button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // API Configuration
Â  Â  Â  Â  const API_BASE_URL = 'https://three60tinted-agendamento-backend.onrender.com/api';

Â  Â  Â  Â  // Application State
Â  Â  Â  Â  let services = [];
Â  Â  Â  Â  let selectedTime = null; // Changed to null for clearer initial state
Â  Â  Â  Â  let formData = {};

Â  Â  Â  Â  // DOM Elements
Â  Â  Â  Â  const serviceSelect = document.getElementById('service');
Â  Â  Â  Â  const dateInput = document.getElementById('date');
Â  Â  Â  Â  const timeSection = document.getElementById('time-section');
Â  Â  Â  Â  const timeGrid = document.getElementById('time-grid');
Â  Â  Â  Â  const loadingTimes = document.getElementById('loading-times');
Â  Â  Â  Â  const summaryCard = document.getElementById('summary-card');
Â  Â  Â  Â  const confirmBtn = document.getElementById('confirm-btn');
Â  Â  Â  Â  const confirmText = document.getElementById('confirm-text');
Â  Â  Â  Â  const confirmLoading = document.getElementById('confirm-loading');
Â  Â  Â  Â  const mainScreen = document.getElementById('main-screen');
Â  Â  Â  Â  const successScreen = document.getElementById('success-screen');
Â  Â  Â  Â  const errorContainer = document.getElementById('error-container');

        // NEW: References to client information inputs
        const fullNameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const phoneInput = document.getElementById('phone');

        // NEW: Reference to the Service and Time card
        const serviceTimeCard = document.getElementById('service-time-card');

Â  Â  Â  Â  // Set minimum date to today
Â  Â  Â  Â  const today = new Date().toISOString().split('T')[0];
Â  Â  Â  Â  dateInput.min = today;

Â  Â  Â  Â  // Event Listeners
Â  Â  Â  Â  serviceSelect.addEventListener('change', handleSelectionChange);
Â  Â  Â  Â  dateInput.addEventListener('change', handleSelectionChange);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // MODIFICADO: Adicionado listener para os campos de informaÃ§Ã£o do cliente para ativar/desativar
        fullNameInput.addEventListener('input', handleClientInfoChange);
        emailInput.addEventListener('input', handleClientInfoChange);
        phoneInput.addEventListener('input', handleClientInfoChange); // Optional, if phone also triggers
Â  Â  Â  Â  
        confirmBtn.addEventListener('click', confirmAppointment);

Â  Â  Â  Â  // Utility Functions
Â  Â  Â  Â  function showError(message) {
Â  Â  Â  Â  Â  Â  errorContainer.innerHTML = `<div class="error-message">${message}</div>`;
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  errorContainer.innerHTML = '';
Â  Â  Â  Â  Â  Â  }, 5000);
Â  Â  Â  Â  }

Â  Â  Â  Â  function hideError() {
Â  Â  Â  Â  Â  Â  errorContainer.innerHTML = '';
Â  Â  Â  Â  }

        // NEW: Function to toggle visibility of Service and Time card
        function toggleServiceTimeCard(enable) {
            if (enable) {
                serviceTimeCard.classList.remove('hidden');
                loadServices(); // Load services only when this section is enabled
            } else {
                serviceTimeCard.classList.add('hidden');
            }
        }

        // NEW: Handle changes in client information
        function handleClientInfoChange() {
            const name = fullNameInput.value;
            const email = emailInput.value;

            // Basic validation for name and email to enable the next step
            if (name.trim() !== '' && email.trim() !== '') {
                toggleServiceTimeCard(true); // Enable service/time selection
            } else {
                toggleServiceTimeCard(false); // Disable service/time selection
                // Also clear service/date/time selections if client info is cleared
                serviceSelect.value = '';
                dateInput.value = '';
                selectedTime = null;
                timeSection.style.display = 'none';
                timeGrid.innerHTML = '';
            }
            updateSummary();
        }

Â  Â  Â  Â  // NOVO: FunÃ§Ã£o para lidar com mudanÃ§as no serviÃ§o OU na data
Â  Â  Â  Â  async function handleSelectionChange() {
            hideError(); // Clear any previous errors
Â  Â  Â  Â  Â  Â  const selectedServiceKey = serviceSelect.value;
Â  Â  Â  Â  Â  Â  const selectedDate = dateInput.value;

            // Clear time slots and hide section initially
            timeGrid.innerHTML = '';
            timeSection.style.display = 'none';
            selectedTime = null; // Reset selected time

Â  Â  Â  Â  Â  Â  // Se ambos, serviÃ§o e data, estiverem selecionados, carregue os horÃ¡rios
Â  Â  Â  Â  Â  Â  if (selectedServiceKey && selectedDate) {
Â  Â  Â  Â  Â  Â  Â  Â  await loadAvailableTimes(selectedDate, selectedServiceKey);
Â  Â  Â  Â  Â  Â  Â  Â  timeSection.style.display = 'block';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // Se um dos dois nÃ£o estiver selecionado, oculta a seÃ§Ã£o de horÃ¡rios
Â  Â  Â  Â  Â  Â  Â  Â  timeSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  timeGrid.innerHTML = ''; // Limpa os horÃ¡rios
Â  Â  Â  Â  Â  Â  Â  Â  selectedTime = null; // Reseta o horÃ¡rio selecionado
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  updateSummary();
Â  Â  Â  Â  }

Â  Â  Â  Â  // Load services on initialization
Â  Â  Â  Â  async function loadServices() {
            serviceSelect.innerHTML = '<option value="">Loading services...</option>'; // Show loading message
            serviceSelect.disabled = true; // Disable until loaded
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(`${API_BASE_URL}/services`);
Â  Â  Â  Â  Â  Â  Â  Â  if (!response.ok) throw new Error('Error loading services');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  services = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  serviceSelect.innerHTML = '<option value="">Select a service</option>';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  services.forEach(service => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const option = document.createElement('option');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  option.value = service.service_key; // Use service_key for value
                    option.textContent = `${service.name} ${service.price ? `- ${service.price}` : ''}`; // Display price if available
                    // Store additional data for summary
                    option.dataset.serviceName = service.name;
                    option.dataset.serviceDuration = service.duration; // Assuming duration is always number
                    option.dataset.servicePrice = service.price; // Store as is (can be text or number)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  serviceSelect.appendChild(option);
Â  Â  Â  Â  Â  Â  Â  Â  });
                serviceSelect.disabled = false; // Enable after loading
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error loading services:', error);
Â  Â  Â  Â  Â  Â  Â  Â  showError('Error loading services. Please try again.');
                serviceSelect.innerHTML = '<option value="">Failed to load services</option>'; // Update message on error
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // MODIFICADO: loadAvailableTimes agora aceita service_key e date
Â  Â  Â  Â  async function loadAvailableTimes(date, serviceKey) {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  loadingTimes.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  timeGrid.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  selectedTime = null; // Resetar o tempo selecionado ao recarregar
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(`${API_BASE_URL}/available-times?date=${date}&service_id=${serviceKey}`);
Â  Â  Â  Â  Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const errorData = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(errorData.error || 'Error loading times');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  const availableTimes = data.available_times;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  loadingTimes.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (availableTimes.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeGrid.innerHTML = '<p style="text-align: center; color: #555;">No times available for this date and service.</p>';
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  availableTimes.forEach(time => {
                        // Assuming your backend returns available_times as a list of objects with start_time and end_time
                        // If it only returns start_time, you need to calculate end_time based on service duration.
                        // For now, let's assume `time` directly has a `start_time` and `end_time` property if it's an object.
                        // If `time` is just a string "HH:MM", then `endTime` won't be available here unless calculated.
                        // For safety, let's assume `time` is a string like "HH:MM" and we'll calculate `endTime` later if needed for backend.
                        // Or, if backend sends objects { start_time: "HH:MM", end_time: "HH:MM" }, then use those.
                        // Based on the previous context, `available_times` was just a list of strings, so we'll stick to that.
                        // We'll calculate `end_time` for the `formData` based on `serviceDuration`.

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const timeSlot = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeSlot.className = 'time-slot';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeSlot.textContent = time; // Assuming 'time' is just the start time string
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeSlot.addEventListener('click', () => selectTime(time, timeSlot));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeGrid.appendChild(timeSlot);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error loading times:', error);
Â  Â  Â  Â  Â  Â  Â  Â  loadingTimes.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  showError(error.message || 'Error loading available times. Please try again.');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function selectTime(time, element) {
Â  Â  Â  Â  Â  Â  // Remove previous selection
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.time-slot').forEach(slot => {
Â  Â  Â  Â  Â  Â  Â  Â  slot.classList.remove('selected');
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Select new time
Â  Â  Â  Â  Â  Â  element.classList.add('selected');
Â  Â  Â  Â  Â  Â  selectedTime = time;
Â  Â  Â  Â  Â  Â  updateSummary();
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateSummary() {
Â  Â  Â  Â  Â  Â  const serviceKey = serviceSelect.value;
Â  Â  Â  Â  Â  Â  const date = dateInput.value;
Â  Â  Â  Â  Â  Â  const name = fullNameInput.value; // Use fullNameInput
Â  Â  Â  Â  Â  Â  const email = emailInput.value; Â  // Use emailInput
Â  Â  Â  Â  Â  Â  const phone = phoneInput.value; Â  // Use phoneInput

Â  Â  Â  Â  Â  Â  // Encontrar o objeto de serviÃ§o completo pelo serviceKey
Â  Â  Â  Â  Â  Â  const selectedService = services.find(s => s.service_key === serviceKey);
Â  Â  Â  Â  Â  Â  
            let serviceNameForDisplay = 'N/A';
            let servicePriceForDisplay = '';
            let serviceDurationInMinutes = 0;
            let calculatedEndTime = 'N/A';

            if (selectedService) {
                serviceNameForDisplay = selectedService.name;
                servicePriceForDisplay = selectedService.price; // Keep as is ("Consultar" or number)
                serviceDurationInMinutes = parseInt(selectedService.duration); // Assume duration is always numeric

                if (selectedTime && !isNaN(serviceDurationInMinutes)) {
                    // Calculate end time
                    const [hours, minutes] = selectedTime.split(':').map(Number);
                    const startTimeDate = new Date();
                    startTimeDate.setHours(hours, minutes, 0, 0); // Set to selected time

                    const endTimeDate = new Date(startTimeDate.getTime() + serviceDurationInMinutes * 60 * 1000);
                    calculatedEndTime = endTimeDate.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
                }
            }


Â  Â  Â  Â  Â  Â  formData = {Â 
Â  Â  Â  Â  Â  Â  Â  Â  service_key: serviceKey, // Keep service_key for backend
Â  Â  Â  Â  Â  Â  Â  Â  service_name_display: serviceNameForDisplay, // For summary display
Â  Â  Â  Â  Â  Â  Â  Â  service_price_display: servicePriceForDisplay, // For summary display
                service_duration: serviceDurationInMinutes, // For internal calculations
Â  Â  Â  Â  Â  Â  Â  Â  date: date,Â 
Â  Â  Â  Â  Â  Â  Â  Â  start_time: selectedTime,Â 
                end_time: calculatedEndTime, // Calculated end time
Â  Â  Â  Â  Â  Â  Â  Â  fullName: name,Â 
Â  Â  Â  Â  Â  Â  Â  Â  email: email,Â 
Â  Â  Â  Â  Â  Â  Â  Â  phone: phoneÂ 
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  // Check if all required fields are filled to show summary and enable confirm button
Â  Â  Â  Â  Â  Â  if (name && email && serviceKey && date && selectedTime) {
Â  Â  Â  Â  Â  Â  Â  Â  summaryCard.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const summaryContent = document.getElementById('summary-content');
Â  Â  Â  Â  Â  Â  Â  Â  summaryContent.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="summary-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>Service</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>${formData.service_name_display}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size: 0.875rem; color: #555;">${formData.service_price_display ? `Price: ${formData.service_price_display}` : 'Price: Not available'}</p>
                        <p style="font-size: 0.875rem; color: #555;">Duration: ${formData.service_duration || 'N/A'} mins</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="summary-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>Date</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>${new Date(date).toLocaleDateString('en-US')}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="summary-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>Time</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Start: ${formData.start_time}</p>
                        <p>End: ${formData.end_time}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="summary-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>Client Info</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Name: ${formData.fullName}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>Email: ${formData.email}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${formData.phone ? `<p>Phone: ${formData.phone}</p>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Enable button if all required fields are filled
Â  Â  Â  Â  Â  Â  Â  Â  confirmBtn.disabled = false;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  summaryCard.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  confirmBtn.disabled = true; // Desabilita o botÃ£o se a seleÃ§Ã£o estiver incompleta
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function confirmAppointment() {
Â  Â  Â  Â  Â  Â  if (formData.fullName && formData.email && formData.service_key && formData.date && formData.start_time && formData.end_time) {
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Show loading
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmBtn.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmText.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmLoading.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  hideError();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const appointmentData = {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  client_name: formData.fullName,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  client_email: formData.email,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  client_phone: formData.phone || null,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  service_id: formData.service_key, // Send service_key to backend
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  appointment_date: formData.date,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  start_time: formData.start_time,
                        end_time: formData.end_time // Send calculated end time
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(`${API_BASE_URL}/appointments`, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'application/json',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify(appointmentData)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const errorData = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(errorData.error || 'Error creating appointment');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const result = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Appointment created:', result);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Show success screen
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showSuccessScreen();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('Error confirming appointment:', error);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showError(error.message || 'Error confirming appointment. Please try again.');
Â  Â  Â  Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Hide loading
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmBtn.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmText.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  confirmLoading.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showError('Please fill in all required fields (Name, Email, Service, Date, Time).');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function showSuccessScreen() {
Â  Â  Â  Â  Â  Â  mainScreen.classList.add('hidden');
Â  Â  Â  Â  Â  Â  successScreen.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  successScreen.classList.add('fade-in');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Reutiliza os dados de exibiÃ§Ã£o do formData
Â  Â  Â  Â  Â  Â  const appointmentDetails = document.getElementById('appointment-details');
Â  Â  Â  Â  Â  Â  appointmentDetails.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>Service:</strong> ${formData.service_name_display} ${formData.service_price_display ? `- ${formData.service_price_display}` : ''}</p>
                <p><strong>Duration:</strong> ${formData.service_duration} minutes</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>Date:</strong> ${new Date(formData.date).toLocaleDateString('en-US')}</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>Time:</strong> ${formData.start_time} - ${formData.end_time}</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>Client:</strong> ${formData.fullName}</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>E-mail:</strong> ${formData.email}</p>
Â  Â  Â  Â  Â  Â  Â  Â  ${formData.phone ? `<p><strong>Phone:</strong> ${formData.phone}</p>` : ''}
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  function resetForm() {
Â  Â  Â  Â  Â  Â  // Clear form
Â  Â  Â  Â  Â  Â  serviceSelect.value = '';
Â  Â  Â  Â  Â  Â  dateInput.value = '';
Â  Â  Â  Â  Â  Â  selectedTime = null;
Â  Â  Â  Â  Â  Â  fullNameInput.value = ''; // Use fullNameInput
Â  Â  Â  Â  Â  Â  emailInput.value = ''; Â  // Use emailInput
Â  Â  Â  Â  Â  Â  phoneInput.value = ''; Â  // Use phoneInput
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Clear selections
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.time-slot').forEach(slot => {
Â  Â  Â  Â  Â  Â  Â  Â  slot.classList.remove('selected');
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  timeGrid.innerHTML = ''; // Limpar os horÃ¡rios exibidos
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Hide sections
Â  Â  Â  Â  Â  Â  timeSection.style.display = 'none';
Â  Â  Â  Â  Â  Â  summaryCard.classList.add('hidden');
            toggleServiceTimeCard(false); // Hide service/time card and disable it
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Return to main screen
Â  Â  Â  Â  Â  Â  successScreen.classList.add('hidden');
Â  Â  Â  Â  Â  Â  mainScreen.classList.remove('hidden');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  formData = {};
Â  Â  Â  Â  Â  Â  hideError();
Â  Â  Â  Â  Â  Â  confirmBtn.disabled = true; // Garante que o botÃ£o de confirmar esteja desabilitado
Â  Â  Â  Â  }

Â  Â  Â  Â  // Initialize application
Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', function() {
Â  Â  Â  Â  Â  Â  // Initially hide the service and time selection card
Â  Â  Â  Â  Â  Â  toggleServiceTimeCard(false);
Â  Â  Â  Â  Â  Â  updateSummary(); // Initialize summary and button state
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>
